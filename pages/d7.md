---
layout: page
title: Discussion 7
description: notes, links, example code, exercises
---

# Yelp data sentiment analysis

## Project Goals

The two goals for the project are 
- Provide useful, analytics to **business owners** on Yelp from the datasets provided and, based on these insights, propose data-driven, actionable decisions to said owners in order to improve their ratings on Yelp. 

- Build a web dashboard/widget/web application that visualizes your analysis and makes it easier to understand for **business owners**.

## Datasets

We included four JSON files for you. JSON files are the de-facto standard of transmitting data on the Web and this module will help you learn how to manipulate JSON files. The four JSON files are

- `review.json`: this contains the reviews. There are 942,027 entries of reviews.
- `business.json`: this contains information about businesses. There are 36,327 entries of businesses.
- `user.json`: this contains information about users. There are 272,024 entries of users.
- `tip.json`: this contains information about tips written by users on a business. There are 129,571 tips generated by users.

In this discussion, we will load JSON files into Python, combine `review.json` with `business.json`, and use the `nltk` module to parse the reviews.

For illustration purpose, I will sample the first 100,000 lines of reviews in shell:

```sh
head -n 100000 review_city.json >> sample_review.json
```
 
Then, we open a Jupyter Notebook and load `sample_review.json` and `business.json` into pandas dataframes using the `pd.read_json` command.

```python
import pandas as pd
review = pd.read_json('sample_review.json', lines=True)
review.head()
business = pd.read_json('business_city.json', lines=True)
business.head()
```

Then, similar to `SQL`, we can join tables in `pandas` using `DataFrame.join` command.
```python
df_raw = review.join(business, lsuffix='business_id', rsuffix='business_id', how='inner')
df_raw.head()
```
Then, we use the `DataFrame.join` method to see how many rows and columns are there:
```python
df_raw.shape
# Output: (100000, 23)
```



## Interview questions:

1. Suppose we do a simple linear regression with intercept, and the sample variance of $x_i$ and $y_i$ equals to each other. Consider the following two model: $y = \hat a_1 + \hat b_1 x$; $x = \hat a_2 + \hat b_2 y$. (1) What are the relationships between $\hat b_1$ and $\hat b_2$? (2) What are the relationships between $R^2$ when we run `y ~ x` and `x ~ y`? (3) What are the relationship between $\hat b_1$, $\hat b_2$ and $R^2$?

2. Find an example such that $\text{Cor}(x_1, y) < 0.1$, $\text{Cor}(x_2, y) = 0$, but the $R^2$ for `y ~ x1 + x2` equals to 1.



---
