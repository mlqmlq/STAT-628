
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Discussion 7</title>
    <meta name="author" content="Linquan Ma">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://mlqmlq.github.io/STAT628/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="http://mlqmlq.github.io/STAT628/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="http://mlqmlq.github.io/STAT628/assets/themes/twitter/css/main.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->

    <!-- atom & rss feed -->
    <link href="nil" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="nil" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Data Science Practicum - STAT 628 - Fall 2020</a>
          <ul class="nav">
              <li><a href="/pages/schedule.html">schedule</a></li>
          </ul>

        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h2>Discussion 7 </h2>
</div>

<div class="row-fluid">
  <div class="span12">
    <h1 id="yelp-data-sentiment-analysis">Yelp data sentiment analysis</h1>

<h2 id="project-goals">Project Goals</h2>

<p>The two goals for the project are</p>
<ul>
  <li>
    <p>Provide useful, analytics to <strong>business owners</strong> on Yelp from the datasets provided and, based on these insights, propose data-driven, actionable decisions to said owners in order to improve their ratings on Yelp.</p>
  </li>
  <li>
    <p>Build a web dashboard/widget/web application that visualizes your analysis and makes it easier to understand for <strong>business owners</strong>.</p>
  </li>
</ul>

<h2 id="datasets">Datasets</h2>

<p>We included four JSON files for you. JSON files are the de-facto standard of transmitting data on the Web and this module will help you learn how to manipulate JSON files. The four JSON files are</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">review.json</code>: this contains the reviews. There are 942,027 entries of reviews.</li>
  <li><code class="language-plaintext highlighter-rouge">business.json</code>: this contains information about businesses. There are 36,327 entries of businesses.</li>
  <li><code class="language-plaintext highlighter-rouge">user.json</code>: this contains information about users. There are 272,024 entries of users.</li>
  <li><code class="language-plaintext highlighter-rouge">tip.json</code>: this contains information about tips written by users on a business. There are 129,571 tips generated by users.</li>
</ul>

<p>In this discussion, we will load JSON files into Python, combine <code class="language-plaintext highlighter-rouge">review.json</code> with <code class="language-plaintext highlighter-rouge">business.json</code>, and use the <code class="language-plaintext highlighter-rouge">nltk</code> module to parse the reviews.</p>

<p>For illustration purpose, I will sample the first 100,000 lines of reviews in shell:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-n</span> 100000 review_city.json <span class="o">&gt;&gt;</span> sample_review.json
</code></pre></div></div>

<p>Then, we open a Jupyter Notebook and load <code class="language-plaintext highlighter-rouge">sample_review.json</code> and <code class="language-plaintext highlighter-rouge">business.json</code> into pandas dataframes using the <code class="language-plaintext highlighter-rouge">pd.read_json</code> command.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="n">review</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_json</span><span class="p">(</span><span class="s">'sample_review.json'</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">review</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">business</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_json</span><span class="p">(</span><span class="s">'business_city.json'</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">business</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<p>Then, similar to <code class="language-plaintext highlighter-rouge">SQL</code>, we can join tables in <code class="language-plaintext highlighter-rouge">pandas</code> using <code class="language-plaintext highlighter-rouge">DataFrame.join</code> command.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_raw</span> <span class="o">=</span> <span class="n">review</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">business</span><span class="p">,</span> <span class="n">lsuffix</span><span class="o">=</span><span class="s">'business_id'</span><span class="p">,</span> <span class="n">rsuffix</span><span class="o">=</span><span class="s">'business_id'</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">'inner'</span><span class="p">)</span>
<span class="n">df_raw</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>
<p>Then, we use the <code class="language-plaintext highlighter-rouge">DataFrame.join</code> method to see how many rows and columns are there:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_raw</span><span class="p">.</span><span class="n">shape</span>
<span class="c1"># Output: (100000, 23)
</span></code></pre></div></div>

<h2 id="interview-questions">Interview questions:</h2>

<ol>
  <li>
    <p>Suppose we do a simple linear regression with intercept, and the sample variance of $x_i$ and $y_i$ equals to each other. Consider the following two model: $y = \hat a_1 + \hat b_1 x$; $x = \hat a_2 + \hat b_2 y$. (1) What are the relationships between $\hat b_1$ and $\hat b_2$? (2) What are the relationships between $R^2$ when we run <code class="language-plaintext highlighter-rouge">y ~ x</code> and <code class="language-plaintext highlighter-rouge">x ~ y</code>? (3) What are the relationship between $\hat b_1$, $\hat b_2$ and $R^2$?</p>
  </li>
  <li>
    <p>Find an example such that $\text{Cor}(x_1, y) &lt; 0.1$, $\text{Cor}(x_2, y) = 0$, but the $R^2$ for <code class="language-plaintext highlighter-rouge">y ~ x1 + x2</code> equals to 1.</p>
  </li>
</ol>

<hr />

  </div>
</div>

<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
inlineMath: [['$','$'], ['\\(','\\)']],
processEscapes: true},
jax: ["input/TeX","input/MathML","input/AsciiMath","output/CommonHTML"],
extensions: ["tex2jax.js","mml2jax.js","asciimath2jax.js","MathMenu.js","MathZoom.js","AssistiveMML.js", "[Contrib]/a11y/accessibility-menu.js"],
TeX: {
extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],
equationNumbers: {
autoNumber: "AMS"
}
}
});
</script>
      </div>
      <hr>
      <footer>
        <p>
          <!-- start of footer -->
          Fall 2020 &nbsp;-&nbsp;
          <a href="http://mlqmlq.github.io">Linquan Ma</a>
          <!-- end of footer -->
        </small></p>
      </footer>

    </div>

    
  </body>
</html>

